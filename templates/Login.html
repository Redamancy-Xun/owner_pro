<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    html {
        height: 100%;
    }

    body {
        height: 100%;
    }

    .container {
        height: 100%;
        background-image: linear-gradient(to right, rgb(186, 209, 250), #fff);

    }

    .login_part {
        background-color: #fff;
        width: 358px;
        height: 588px;
        border-radius: 15px;
        padding: 0 50px;
        position: relative;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }

    .header1 {
        height: 100px;
        font-family: Microsoft YaHei;
        color: #52B4E3;
        line-height: 100px;
        text-align-last: left;
        font-weight: 600;
        font-size: 20px;
    }

    .header2 {
        font-size: 38px;
        font-weight: 600;
        text-align: center;
        line-height: 100px;
    }

    .input-item {
        display: block;
        width: 100%;
        margin-bottom: 20px;
        border: 0;
        padding: 10px;
        border-bottom: 1px solid rgb(128, 125, 125);
        font-size: 15px;
        outline: none;
    }

    #submit_button {
        text-align: center;
        padding: 10px;
        width: 100%;
        margin-top: 40%;
        background-color: rgb(197, 233, 255);
        color: rgba(101, 112, 116, 0.779);
        border-radius: 10px;
        border: 0;
    }

    .turn_to_registration {
        text-align: center;
        line-height: 88px;
    }

    a {
        text-decoration-line: none;
        color: #abc1ee;
    }
</style>

<body>
    <div class="container">
        <div class="login_part">
            <div class="header1">博远信息技术社</div>
            <div class="header2">登录</div>
            <form id="form_login" action="http://localhost:8080/login" method="post">
                <input type="text" name="username" class="input-item" placeholder="用户名" id="username">
                <input type="password" name="password" class="input-item" placeholder="请输入你的密码 " id="password">
            </form>
            <button id="submit_button" onclick="beforeSubmit()">点我登录</button>
            <div class="turn_to_registration">还没有账号？
                <a href="signup.html">点我注册</a>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        let usernameInput = document.getElementById('username');
        let passwordInput = document.getElementById('password');
        let submitButton = document.getElementById('submit_button');

        function checkInputs() {
            let username = usernameInput.value;
            let password = passwordInput.value;
            if (username.length >= 2 && password.length >= 6 && password.length <= 20) {
                submitButton.style.backgroundColor = '#28a745'; // 设置登录按钮的背景颜色
                submitButton.style.color = '#ffffff'; // 设置登录按钮的文字颜色
            } else {
                submitButton.style.backgroundColor = 'rgb(197, 233, 255)'; // 恢复原始的登录按钮背景颜色
                submitButton.style.color = 'rgba(101, 112, 116, 0.779)'; // 恢复原始的登录按钮文字颜色
            }
        }

        usernameInput.addEventListener('input', checkInputs);
        passwordInput.addEventListener('input', checkInputs);

        function beforeSubmit() {
            let username = usernameInput.value;
            let password = passwordInput.value;
	const axios = require('axios');

            if (username.length >= 2 && password.length >= 6 && password.length <= 20) {
                axios.post('http://localhost:8080/login', {
                    username: username,
                    password: password
                }, {
                    headers: {
                        'Contect-type': 'application/json',
                    },
                })
                    .then(function (response) {
                        // 在这里处理登录成功后的逻辑
                        console.log(response.status);
                        console.log(response.data);
                        window.location.href = 'homepage.html';
                    })
                    .catch(function (error) {
                        // 在这里处理登录失败后的逻辑
                        console.log(error.message);
                    });
            } else if (username.length <= 2) {
                alert('用户名格式不正确，请重新输入！');
            } else if (password.length < 6 || password.length > 20) {
                alert('密码格式不正确，请重新输入！')
            }

        };
        submitButton.addEventListener('click', beforeSubmit);
    </script>
</body>

</html>