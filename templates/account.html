<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åšè¿œ-ä¸ªäººä¿¡æ¯é¡µ</title>
    <script src="./js/jquery.min.js"></script>
</head>

<style>
    * {
        margin: 0;
        padding: 0;
    }

    html {
        height: 100%;
    }

    body {
        height: 100%;
    }

    .container {
        height: 100%;
        background-color: rgb(245, 246, 254);
    }

    li {
        list-style: none;
    }

    .header {
        height: 5.22%;
        width: 100%;
        margin: auto;
        background: linear-gradient(to right, #b9d2fb, #f6f9ff);
        border-bottom: #9b9b9b solid 1px;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);
    }

    .logo {
        height: 100%;
        padding: 0 0.98%;
        float: left;
        margin-left: 19.6%;
        font-size: 17px;
        color: #52aee1;
        line-height: 40px;
        text-decoration: none;
        font-weight: bold;
        border-radius: 28px;
    }

    .logo img {
        max-width: 100%;
        max-height: 100%;
        border-radius: 28px;
    }

    .nav {
        float: left;
        height: 100%;
        padding: 0 0.98%;
        margin-left: 0.32%;
        font-size: 20px;
        text-align: center;
    }

    .nav ul li {
        float: left;
        padding: 2 2px;
    }

    .nav ul li a {
        display: block;
        height: 95%;
        width: 100%;
        padding: 0 15px;
        margin-left: 2px;
        margin-right: 2px;
        line-height: 40px;
        font-size: 18px;
        color: #000;
        text-decoration: none;
    }

    .nav ul li a:hover {
        padding: 0 13px;
        margin-left: 2px;
        margin-right: 2px;
        font-size: 20px;
        color: #0055ff;
        border-bottom: 2px solid #0055ff;
    }

    .user {
        float: left;
        height: 95%;
        width: 2.45%;
        padding: 20 0px;
        margin-left: 33.33%;
        line-height: 100%;
        font-size: 16px;
        background-color: #fff;
        box-shadow: 0 0 3px rgb(255, 255, 255);
        border-radius: 28px;
    }

    .user img {
        max-width: 100%;
        max-height: 100%;
    }

    .user-name {
        float: left;
        height: 100%;
        padding-top: 0.98%;
        margin-left: 1%;
        line-height: 100%;
        font-size: 16px;
        color: #4e4e4e;
    }

    #smallheadportrait {
        border-radius: 28px;
    }

    .smallhead {
        height: 20%;
        width: 50%;
        margin-left: 25%;
        margin-top: 5px;
        background-image: linear-gradient(to bottom, rgb(195, 215, 250), rgb(249, 250, 252));
        box-shadow: 0 0 1.5px rgba(36, 36, 36, 0.5);
    }

    .headportrait {
        float: left;
        height: 80%;
        width: 15.7%;
        margin-top: 1%;
        margin-left: 2%;
        box-shadow: 0 0 15px rgb(255, 255, 255);
    }

    .headportrait img {
        max-width: 100%;
        max-height: 100%;
    }

    .headportrait:hover {
        cursor: pointer;
    }

    .username {
        float: left;
        width: 70%;
        font-size: 28px;
        font-weight: bold;
        text-align: left;
        line-height: 60px;
        margin-top: 2%;
        margin-left: 1%;
    }

    .signature {
        float: left;
        width: 60%;
        font-size: 16px;
        text-align: left;
        margin-top: 2px;
    }

    .account-wrapper {
        float: left;
        background-color: #fff;
        width: 25%;
        height: 70%;
        border-radius: 10px;
        padding: 0 50px;
        margin-left: 25%;
        margin-top: 10px;
        box-shadow: 0 0 1.5px rgba(36, 36, 36, 0.5);

    }

    .header2 {
        float: left;
        margin-left: 38%;
        font-size: 25px;
        font-weight: bold;
        text-align: center;
        line-height: 40px;
    }

    .change-btn {
        float: left;
        margin-top: 2%;
        margin-left: 10%;
        width: 19%;
        padding: 2px;
        font-size: 14px;
        border-radius: 3px;
        color: #0e7fff;
        border-color: #0e7fff;
        background-color: #fff;
    }

    .change-btn:hover {
        cursor: pointer;
        outline: none;
    }

    .yhm {
        margin-top: 12%;
    }

    .input-item {
        display: block;
        width: 100%;
        margin-bottom: 10px;
        border: 0;
        padding: 10px;
        border-bottom: 1px solid rgb(128, 125, 125);
        font-size: 14px;
        outline: none;
    }

    .input-item:placeholder {
        text-transform: uppercase;
    }

    input[disabled] {
        background-color: #f4f4f4;
        /* è®¾ç½®ç¦ç”¨çŠ¶æ€ä¸‹çš„èƒŒæ™¯é¢œè‰² */
        border: none;
    }

    .xuehaoxingmin {
        display: block;
        width: 100%;
        margin-bottom: 10px;
        border: 0;
        padding: 10px;
        font-weight: bold;
        font-size: 15px;
        outline: none;
    }

    #feedbackMessage {
        color: red;
    }

    .btn {
        text-align: center;
        padding: 10px;
        width: 100%;
        margin-top: 5px;
        background-color: rgb(110, 195, 249);
        color: rgb(255, 255, 255);
        font-size: 18px;
        border: none;
        outline: none;
    }

    .btn:hover {
        background-color: rgb(42, 168, 253);
        cursor: pointer;
    }

    .create-wrapper {
        float: left;
        background-color: #fff;
        width: 17.2%;
        height: 70%;
        border-radius: 10px;
        padding: 0 10px;
        margin-left: 1%;
        margin-top: 10px;
        box-shadow: 0 0 1.5px rgba(36, 36, 36, 0.5);
    }

    .create-btn {
        background-color: #ffffffea;
        margin-top: 3px;
        margin-left: 20%;
        width: 60%;
        height: 5%;
        color: #0e7fff;
        font-size: 15px;
        border-radius: 3px;
        border-color: #0e7fff;
        outline: none;
    }

    .create-btn:hover {
        cursor: pointer;
    }

    .article-wrapper {
        width: 94%;
        height: 84%;
        border-radius: 5px;
        margin-top: 10px;
        margin-left: 3%;
        background-color: rgb(255, 255, 255);
        font-size: 14px;
    }

    .article {
        width: 100%;
        height: 28%;
        border-radius: 5px;
        margin-top: 2%;
        margin-bottom: 6%;
        background-image: linear-gradient(to bottom, rgb(210, 225, 252), rgb(239, 243, 250));
        font-size: 13px;
    }

    .lastp {
        float: left;
        margin-top: 0%;
        margin-left: 10%;
        width: 30px;
        height: 30px;
        background-color: rgb(110, 195, 249); /* è“è‰² */
        border: 1px solid rgb(110, 195, 249); /* æ·±è“è‰²è¾¹æ¡† */
        border-radius: 50%; /* åœ†å½¢æŒ‰é’® */
        display: flex;
        justify-content: center;
        align-items: center;
        color: #ffffff; /* ç™½è‰²æ–‡å­— */
        font-size: 14px; /* æ–‡å­—å¤§å° */
        cursor: pointer;
    }

    .nextp {
        float: left;
        margin-top: 0%;
        margin-left: 20%;
        width: 30px;
        height: 30px;
        background-color: rgb(110, 195, 249); /* è“è‰² */
        border: 1px solid rgb(110, 195, 249); /* æ·±è“è‰²è¾¹æ¡† */
        border-radius: 50%; /* åœ†å½¢æŒ‰é’® */
        display: flex;
        justify-content: center;
        align-items: center;
        color: #ffffff; /* ç™½è‰²æ–‡å­— */
        font-size: 14px; /* æ–‡å­—å¤§å° */
        cursor: pointer;
    }

    .nextp:hover {
        background-color: rgb(42, 168, 253); /* è“è‰² */
        border: 1px solid rgb(42, 168, 253); /* æ·±è“è‰²è¾¹æ¡† */
    }

    .nextp:active {
        background-color: rgb(42, 168, 253); /* è“è‰² */
        border: 1px solid rgb(42, 168, 253); /* æ·±è“è‰²è¾¹æ¡† */
    }

    .lastp:hover {
        background-color: rgb(42, 168, 253); /* è“è‰² */
        border: 1px solid rgb(42, 168, 253); /* æ·±è“è‰²è¾¹æ¡† */
    }

    .lastp:active {
        background-color: rgb(42, 168, 253); /* è“è‰² */
        border: 1px solid rgb(42, 168, 253); /* æ·±è“è‰²è¾¹æ¡† */
    }

    .page {
        float: right;
        margin-top: 2%;
        margin-right: 0%;
        cursor: pointer;
    }
</style>

<body>
    <div class="container">
        <div class="header"><!--å¯¼èˆªæ -->
            <div class="logo">
                <h2>åšè¿œä¿¡æ¯æŠ€æœ¯ç¤¾</h2>
            </div>

            <div class="nav">
                <ul>
                    <li><a href="index.html">é¦–é¡µ</a></li>
                    <li><a href="account.html">ä¸ªäººä¸­å¿ƒ</a></li>
                </ul>
            </div>
            <div class="user">
                <img src="http://116.62.103.210/image/default.jpg" alt="" id="smallheadportrait">
            </div>
            <div class="user-name" id="username1">ç”¨æˆ·å</div>
        </div>

        <div class="smallhead"><!--å¤´åƒç”¨æˆ·åç­¾å-->
            <div class="headportrait"><img src="http://116.62.103.210/image/default.jpg" alt="" id="headportrait"></div>
            <div class="username" id="username2">å‘æœåŠ¡å™¨æŸ¥è¯¢ç”¨æˆ·å</div><br>
        </div>

        <div class="account-wrapper">
            <div class="header2">ä¸ªäººä¿¡æ¯</div><button type="button" onclick="toggleInput()" class="change-btn"
                id="change-btn">æˆ‘è¦ä¿®æ”¹</button>
            <div class="form-wrapper"><!--å±•ç¤ºä¸ªäººä¿¡æ¯å¹¶å¯ä»¥ä¿®æ”¹-->
                <form action="http://116.62.103.210:8080/update" method="post" name="æ›´æ–°ä¸ªäººä¿¡æ¯è¡¨å•" id="update-form">
                    <div class="yhm">ç”¨æˆ·åï¼š</div>
                    <input type="text" id="username" name="username" placeholder="ç”¨æˆ·åï¼ˆ2~20ä½ï¼‰" class="input-item"
                        value="å‘æœåŠ¡å™¨æŸ¥è¯¢ç”¨æˆ·å" disabled>
                    å¯†ç ï¼š<div class="xuehaoxingmin" id="password" name="password">Â·Â·Â·Â·Â·Â·Â·Â·</div>
                    å­¦å·ï¼š<div class="xuehaoxingmin" id="studentid">å‘æœåŠ¡å™¨æŸ¥è¯¢å­¦å·</div>
                    å§“åï¼š<div class="xuehaoxingmin" id="studentname">å‘æœåŠ¡å™¨æŸ¥è¯¢å§“å</div>
                    é‚®ç®±ï¼ˆé€‰å¡«ï¼‰ï¼š<input type="text" id="email" name="email" placeholder="é‚®ç®±" class="input-item"
                        value="å‘æœåŠ¡å™¨æŸ¥è¯¢é‚®ç®±" disabled>
                    ç”Ÿæ—¥ï¼ˆé€‰å¡«ï¼‰ï¼š<input type="date" id="birthday" name="birthday" placeholder="ç”Ÿæ—¥" class="input-item"
                        value="å‘æœåŠ¡å™¨æŸ¥è¯¢ç”Ÿæ—¥" disabled>
                    <div id="feedbackMessage"></div>
                    <input type="submit" class="btn" id="submit" value="æäº¤ä¿®æ”¹">
                </form>
            </div>
        </div>

        <div class="create-wrapper"><!--åˆ›ä½œä¸­å¿ƒæ¿å—-->
            <div class="header2">åˆ›ä½œä¸­å¿ƒ</div>
            <button class="create-btn" onclick="createArticle()">å‘å¸ƒå¸–å­</button>
            <div class="article-wrapper">
                <div class="article" id="article1">
                    æ²¡æœ‰æ›´å¤šå¸–å­äº†å“¦
                </div>
                <div class="article" id="article2">
                    æ²¡æœ‰æ›´å¤šå¸–å­äº†å“¦
                </div>
                <div class="article" id="article3">
                    æ²¡æœ‰æ›´å¤šå¸–å­äº†å“¦
                </div>
                <button class="lastp" id="lastp">ğŸ¢€</button>
                <button class="nextp" id="nextp">ğŸ¢‚</button>
                <div class="page" id="page">ç¬¬1/1é¡µ</div>
            </div>
        </div>
    </div>

    <script>
        //å‡†å¤‡æäº¤åˆ›ä½œä¸­å¿ƒçš„é¡µæ•°å’Œä¸€é¡µæ˜¾ç¤ºæ•°

        let pageSize = 3;
        let pageNum = 1;
        let pages
        function createcentre() {//è·å–ä¸ªäººä¿¡æ¯ï¼Œä»¥åŠåˆ›ä½œä¸­å¿ƒè¯·æ±‚å±•ç¤ºå¸–å­
            // è·å–ç¼“å­˜æ•°æ®
            let sessionData = localStorage.getItem('sessionData');
            let sessionId = localStorage.getItem('sessionId');
            console.log(sessionId);
            $.ajax({
                type: "GET",
                url: "http://116.62.103.210:8080/userInfo",
                headers: {
                    Sessionid: sessionId
                },
                data: {
                    pageSize: 3,
                    pageNum: pageNum,
                },
                dataType: "json",
                contentType: 'application/json',
                crossDomain: true,
                xhrFields: { withCredentials: true },
                success: function (data) {
                    console.log(data)
                    sessionStorage.setItem('pages', data.result[1].pages);//æ€»é¡µæ•°ç¼“å­˜
                    let headportrait = document.getElementById('headportrait');
                    let smallheadportrait = document.getElementById('smallheadportrait');
                    let headusername = document.getElementById('username2');
                    let topusername = document.getElementById('username1');
                    let username = document.getElementById('username');
                    let studentid = document.getElementById('studentid');
                    let studentname = document.getElementById('studentname');
                    let email = document.getElementById('email');
                    let birthday = document.getElementById('birthday');
                    //å±•ç¤ºä¸ªäººä¿¡æ¯
                    if (data.result[0].headportrait != null) {
                        headportrait.src = `http://116.62.103.210/image/${data.result[0].headportrait}`
                        smallheadportrait.src = `http://116.62.103.210/image/${data.result[0].headportrait}`
                    }
                    else {
                        headportrait.src = "http://116.62.103.210/image/default.jpg"
                        smallheadportrait.src = "http://116.62.103.210/image/default.jpg"
                    }
                    headusername.innerHTML = data.result[0].username
                    topusername.innerHTML = data.result[0].username
                    username.value = data.result[0].username
                    studentid.innerHTML = data.result[0].studentid
                    studentname.innerHTML = data.result[0].studentname
                    email.value = data.result[0].email
                    birthday.value = data.result[0].birthday.slice(0,10)

                    let firstData, secondData, thirdData;
                    //åˆ†åˆ«æå–itemsä¸­çš„ä¸‰ç»„å¸–å­çš„æ•°æ®
                    if (data.result[1].items[0] != null)
                        firstData = data.result[1].items[0];
                    sessionStorage.setItem('firstid', firstData.article_id);
                    if (data.result[1].items[1] != null)
                        secondData = data.result[1].items[1];
                    sessionStorage.setItem('secondid', secondData.article_id);
                    if (data.result[1].items[2] != null)
                        thirdData = data.result[1].items[2];
                    sessionStorage.setItem('thirdid', thirdData.article_id);
                    //åˆ†åˆ«é€‰å–ä¸‰ä¸ªå¸–å­çš„å±•ç¤ºæ¡†
                    let firstDiv = document.getElementById('article1');
                    let secondDiv = document.getElementById('article2');
                    let thirdDiv = document.getElementById('article3');
                    //åœ¨å„è‡ªå±•ç¤ºæ¡†ä¸­æ˜¾ç¤ºå¸–å­æ•°æ®
                    if (data.result[1].items[0] != null) {
                        var firstupdateDate = firstData.update_date.slice(0, 10); // æˆªå–å¹´æœˆæ—¥éƒ¨åˆ†
                        firstDiv.innerHTML = `
                                    <div class="firsttiao"  onclick="detailArticle1()">
                                    <p class="zhuti">${firstData.content.slice(0,12)+'...'}</p>
                                    <p>å¼€å§‹: ${firstData.start_time}  æˆªæ­¢: ${firstData.end_time}</p>
                                    <p>ç±»å‹ï¼š${firstData.type}  éœ€æ±‚ï¼š${firstData.direction}  æŠ€æœ¯æ ˆï¼š${firstData.tag}</p>
                                    <p>è”ç³»æ–¹å¼ï¼š${firstData.contact}</p>
                                    <p>æ›´æ–°ï¼š${firstupdateDate}</p>
                                    <div id="finish1">å®ŒæˆçŠ¶æ€ï¼š${firstData.finish}</div>
                                    </div>
                                    <button id="update1" onclick="updateArticle1()" style="cursor: pointer">ä¿®æ”¹</button>
                                    `;
                        document.getElementById('update1').style.color = "#0062ff";
                        document.getElementById('update1').style.borderColor = "#0062ff";
                        document.getElementById('update1').style.backgroundColor = "#f6f9ff";
                        document.getElementById('update1').style.borderRadius = "4px";
                        document.getElementById('update1').style.marginLeft = "80%";
                        //è®¾ç½®ç¬¬ä¸€ä¸ªå¸–å­çš„å·²å®Œæˆ/æœªå®Œæˆæ ‡è¯†
                        let firstfinish = document.getElementById('finish1');
                        if (firstData.finish == 0) {
                            firstfinish.innerHTML = "æœªå®Œæˆ";
                            firstfinish.style.color = "#ff0000";
                            firstfinish.style.borderColor = "#ff0000";
                        }
                        else if (firstData.finish == 1) {
                            firstfinish.innerHTML = "å·²å®Œæˆ";
                            firstfinish.style.color = "#0055ff";
                            firstfinish.style.borderColor = "#0055ff";
                        }
                    }
                    if (data.result[1].items[1] != null) {
                        var secondupdateDate = secondData.update_date.slice(0, 10); // æˆªå–å¹´æœˆæ—¥éƒ¨åˆ†          
                        secondDiv.innerHTML = `
                                    <div class="secondtiao"  onclick="detailArticle2()">
                                    <p class="zhuti">${secondData.content.slice(0,12)+'...'}</p>
                                    <p>å¼€å§‹: ${secondData.start_time}  æˆªæ­¢: ${secondData.end_time}</p>
                                    <p>ç±»å‹ï¼š${secondData.type}  éœ€æ±‚ï¼š${secondData.direction}  æŠ€æœ¯æ ˆï¼š${secondData.tag}</p>
                                    <p>è”ç³»æ–¹å¼ï¼š${secondData.contact}</p>
                                    <p>æ›´æ–°ï¼š${secondupdateDate}</p>
                                    <div id = "finish2">å®ŒæˆçŠ¶æ€ï¼š${secondData.finish}</div>
                                    </div>
                                    <button id="update2" onclick="updateArticle2()" style="cursor: pointer">ä¿®æ”¹</button>

                                    `;
                        document.getElementById('update2').style.color = "#0062ff";
                        document.getElementById('update2').style.borderColor = "#0062ff";
                        document.getElementById('update2').style.backgroundColor = "#f6f9ff";
                        document.getElementById('update2').style.borderRadius = "4px";
                        document.getElementById('update2').style.marginLeft = "80%";
                        let secondfinish = document.getElementById('finish2');//è®¾ç½®ç¬¬äºŒä¸ªå¸–å­çš„å·²å®Œæˆ/æœªå®Œæˆæ ‡è¯†
                        if (secondData.finish == 0) {
                            secondfinish.innerHTML = "æœªå®Œæˆ";
                            secondfinish.style.color = "#ff0000";
                            secondfinish.style.borderColor = "#ff0000";
                        }
                        else if (secondData.finish == 1) {
                            secondfinish.innerHTML = "å·²å®Œæˆ";
                            secondfinish.style.color = "#0055ff";
                            secondfinish.style.borderColor = "#0055ff";
                        }
                    }
                    if (data.result[1].items[2] != null) {
                        var thirdupdateDate = thirdData.update_date.slice(0, 10); // æˆªå–å¹´æœˆæ—¥éƒ¨åˆ†
                        thirdDiv.innerHTML = `
                                    <div class="thirdtiao"  onclick="detailArticle3()">
                                    <p class="zhuti">${thirdData.content.slice(0,12)+'...'}</p>
                                    <p>å¼€å§‹: ${thirdData.start_time}  æˆªæ­¢: ${thirdData.end_time}</p>
                                    <p>ç±»å‹:${thirdData.type}  éœ€æ±‚ï¼š${thirdData.direction}  æŠ€æœ¯æ ˆï¼š${thirdData.tag}</p>
                                    <p>è”ç³»æ–¹å¼ï¼š${thirdData.contact}</p>                                   
                                    <p>æ›´æ–°ï¼š${thirdupdateDate}</p>
                                    <div id = "finish3">å®ŒæˆçŠ¶æ€ï¼š${thirdData.finish}</div>
                                    </div>
                                    <button class="updatebtn" id="update3" onclick="updateArticle3()" style="cursor: pointer">ä¿®æ”¹</button>
                                    `;
                        document.getElementById('update3').style.color = "#0062ff";//è®¾ç½®ç¬¬ä¸‰ä¸ªä¿®æ”¹æŒ‰é’®çš„æ ·å¼
                        document.getElementById('update3').style.borderColor = "#0062ff";
                        document.getElementById('update3').style.backgroundColor = "#f6f9ff";
                        document.getElementById('update3').style.borderRadius = "4px";
                        document.getElementById('update3').style.marginLeft = "80%";

                        let thirdfinish = document.getElementById('finish3');//è®¾ç½®ç¬¬ä¸‰ä¸ªå¸–å­çš„å·²å®Œæˆ/æœªå®Œæˆæ ‡è¯†
                        if (thirdData.finish == 0) {
                            thirdfinish.innerHTML = "æœªå®Œæˆ";
                            thirdfinish.style.color = "#ff0000";
                            thirdfinish.style.borderColor = "#ff0000";
                        }
                        else if (thirdData.finish == 1) {
                            thirdfinish.innerHTML = "å·²å®Œæˆ";
                            thirdfinish.style.color = "#0055ff";
                            thirdfinish.style.borderColor = "#0055ff";
                        }
                    }
                    let page = document.getElementById('page');//æ˜¾ç¤ºå½“å‰é¡µç å’Œæ€»é¡µæ•°
                    page.innerHTML = `ç¬¬${data.result[1].pageNum}/${data.result[1].pages}é¡µ`;
                },
                error: function (error) {
                    console.error(error)
                }
            });
        }

        //é€‰å–ä¸ªäººä¿¡æ¯çš„å„æ¿å—


        // åœ¨é¡µé¢åŠ è½½å®Œæ¯•æ—¶æ‰§è¡Œå‡½æ•°
        window.onload = function () {
            createcentre();
        };
        // å½“ä¸Šä¸€é¡µæŒ‰é’®è¢«ç‚¹å‡»æ—¶å†æ¬¡æ‰§è¡Œå‡½æ•°
        document.getElementById('lastp').addEventListener('click', function () {
            pageNum--;
            if (pageNum < 1) {//é¡µç æ•°ä¸å°äº1
                alert('åˆ°å¤´å•¦ã€‚');
                pageNum = 1;
            }
            createcentre();
        });
        // å½“ä¸‹ä¸€é¡µæŒ‰é’®è¢«ç‚¹å‡»æ—¶å†æ¬¡æ‰§è¡Œå‡½æ•°
        document.getElementById('nextp').addEventListener('click', function () {
            pageNum++;
            let pages = sessionStorage.getItem('pages');//æå–ç¼“å­˜ä¸­çš„æ€»é¡µæ•°
            if (pageNum > pages) {//é¡µç æ•°ä¸èƒ½è¶…è¿‡é¡µé¢æ€»æ•°
                alert('åˆ°å¤´å•¦ã€‚');
                pageNum = pages;
            }
            createcentre();
        });

        function detailArticle1() {//è·³è½¬åˆ°ç¬¬ä¸€ä¸ªå¸–å­çš„è¯¦æƒ…é¡µ
            let id1 = sessionStorage.getItem('firstid');
            window.location.href = `http://116.62.103.210/detail.html?id=${id1}`
        }
        function detailArticle2() {//è·³è½¬åˆ°ç¬¬äºŒä¸ªå¸–å­çš„è¯¦æƒ…é¡µ
            let id2 = sessionStorage.getItem('secondid');
            window.location.href = `http://116.62.103.210/detail.html?id=${id2}`
        }
        function detailArticle3() {//è·³è½¬åˆ°ç¬¬ä¸‰ä¸ªå¸–å­çš„è¯¦æƒ…é¡µ
            let id3 = sessionStorage.getItem('thirdid');
            window.location.href = `http://116.62.103.210/detail.html?id=${id3}`
        }

        function updateArticle1() {//è·³è½¬åˆ°ç¬¬ä¸€ä¸ªå¸–å­çš„ä¿®æ”¹é¡µ
            let id1 = sessionStorage.getItem('firstid');
            window.location.href = `http://116.62.103.210/updateArticle.html?id=${id1}`
        }
        function updateArticle2() {//è·³è½¬åˆ°ç¬¬äºŒä¸ªå¸–å­çš„ä¿®æ”¹é¡µ
            let id2 = sessionStorage.getItem('secondid');
            window.location.href = `http://116.62.103.210/updateArticle.html?id=${id2}`
        }
        function updateArticle3() {//è·³è½¬åˆ°ç¬¬ä¸‰ä¸ªå¸–å­çš„ä¿®æ”¹é¡µ
            let id3 = sessionStorage.getItem('thirdid');
            window.location.href = `http://116.62.103.210/updateArticle.html?id=${id3}`
        }

        //åˆ‡æ¢è¡¨å•å¯å¦å¡«å†™çš„æŒ‰é’® â€œæˆ‘è¦ä¿®æ”¹â€/â€œä¿å­˜ä¿®æ”¹â€
        function toggleInput() {
            let username = document.getElementById("username");
            if (username.disabled) {
                username.disabled = false;
                document.getElementById("change-btn").innerHTML = "ä¿å­˜ä¿®æ”¹";
                document.getElementById("change-btn").style.color = "#ff0000";
                document.getElementById("change-btn").style.borderColor = "#ff0000";
            } else {
                username.disabled = true;
                document.getElementById("change-btn").innerHTML = "æˆ‘è¦ä¿®æ”¹";
                document.getElementById("change-btn").style.color = "#0055ff";
                document.getElementById("change-btn").style.borderColor = "#0055ff";
            }
            let email = document.getElementById("email");
            if (email.disabled) {
                email.disabled = false;
            } else {
                email.disabled = true;
            }
            let birthday = document.getElementById("birthday");
            if (birthday.disabled) {
                birthday.disabled = false;
            } else {
                birthday.disabled = true;
            }
            let submit = document.getElementById("submit");
            if (submit.disabled) {
                submit.disabled = false;
            } else {
                submit.disabled = true;
            }
        }

        document.getElementById('update-form').addEventListener('submit', function (event) {//â€œæäº¤ä¿®æ”¹â€ æŒ‰é’®
            event.preventDefault()//é˜»æ­¢é»˜è®¤æäº¤
            //è·å–å„å‚æ•°ä¿¡æ¯
            let username = document.getElementById('username').value
            let password = document.getElementById('password').value

            console.log(username, password)//æ§åˆ¶å°æŸ¥çœ‹

            //åˆ¤æ–­é•¿åº¦(æš‚å®š)
            let usernameInput = document.getElementById('username')
            if (username.length < 2 || username.length > 20) {
                console.log('ç”¨æˆ·åé•¿åº¦éœ€ä¸º2~20ä½')
                usernameInput.style.borderColor = "red"
                usernameInput.style.backgroundColor = "pink";
                document.getElementById('feedbackMessage').innerText = 'Â·ç”¨æˆ·åé•¿åº¦éœ€ä¸º2~20ä½'
                return//é˜»æ­¢ä»£ç è¿›è¡Œ
            }
            else {
                usernameInput.style.borderColor = "black"
                usernameInput.style.backgroundColor = "white";
                document.getElementById('feedbackMessage').innerText = ' '
            }

            // let passwordInput = document.getElementById('password')
            // if (password.length < 6 || password.length > 20) {
            //     console.log('å¯†ç é•¿åº¦éœ€ä¸º6~20ä½')
            //     passwordInput.style.borderColor = "red"
            //     passwordInput.style.backgroundColor = "pink";
            //     document.getElementById('feedbackMessage').innerText = 'Â·å¯†ç é•¿åº¦éœ€ä¸º6~20ä½'
            //     return//é˜»æ­¢ä»£ç è¿›è¡Œ
            // }
            // else {
            //     passwordInput.style.borderColor = "black"
            //     passwordInput.style.backgroundColor = "white";
            //     document.getElementById('feedbackMessage').innerText = ' '
            // }

            // let passwordInput2 = document.getElementById('password2')
            // if (password != password2) {
            //     console.log('è¯·ç¡®è®¤ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸€è‡´')
            //     passwordInput.style.borderColor = "red"
            //     passwordInput.style.backgroundColor = "pink";
            //     passwordInput2.style.borderColor = "red"
            //     passwordInput2.style.backgroundColor = "pink";
            //     document.getElementById('feedbackMessage').innerText = 'Â·è¯·ç¡®è®¤ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸€è‡´'
            //     return//é˜»æ­¢ä»£ç è¿›è¡Œ
            // }
            // else {
            //     passwordInput.style.borderColor = "black"
            //     passwordInput.style.backgroundColor = "white";
            //     passwordInput2.style.borderColor = "black"
            //     passwordInput2.style.backgroundColor = "white";
            //     document.getElementById('feedbackMessage').innerText = ' '
            // }


            /* fetch('http://116.62.103.210:8080/update', {
                method: 'POST',
            body: new FormData(document.getElementById('update-form'))
                    }) // åç«¯æ¥å£åœ°å€
                        .then(response => response.json())//è½¬æ¢jsonæ•°æ®
                        .then(data => {
                console.log(data)// æ‰“å° JSON æ•°æ®
                            alert(data.message)//æ‰“å°messageå†…å®¹
                        })
                        .catch(error => {
                console.error('Error:', error)
                            alert('å‡ºé”™å•¦ï¼è¯·ç¨åå†è¯•ã€‚')
                        })
                })*/
            let sessionData = localStorage.getItem('sessionData');
            let sessionId = localStorage.getItem('sessionId');

            let form = document.getElementById('update-form');
            var name = form.querySelector('#username').value; // è·å–ç”¨æˆ·åå€¼
            var email = form.querySelector('#email').value; // è·å–é‚®ç®±å€¼
            var birthday = form.querySelector('#birthday').value; // è·å–ç”Ÿæ—¥å€¼
            let data = {
                ...(name!=null && {username:name}),
                ...(email!=null && {email:email}),
                ...(birthday!=null && {birthday:birthday})
            }
            jsondata=JSON.stringify(data);
            $.ajax({
                type: "POST",
                url: "http://116.62.103.210:8080/update",
                headers: {
                    Sessionid: sessionId
                },
                data: jsondata,
                dataType: "json",
                contentType: 'application/json',
                crossDomain: true,
                xhrFields: { withCredentials: true },
                success: function (data) {
                    console.log(data)
                    alert(data.message)
                },
                error: function (xhr, status, error) {
                    console.error(error)
                    alert('å‡ºé”™å•¦ï¼è¯·ç¨åå†è¯•ã€‚')
                }
            })
        })
        function createArticle() {
            window.location.href = "createArticle.html"
        }
    </script>
</body>

</html>